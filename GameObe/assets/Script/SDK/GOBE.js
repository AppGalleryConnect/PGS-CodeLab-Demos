/*gobe_v1.1.8*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).GOBE={})}(this,(function(exports){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},check=function(e){return e&&e.Math==Math&&e},global$b=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$a=function(e){try{return!!e()}catch(e){return!0}},fails$9=fails$a,descriptors=!fails$9((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),fails$8=fails$a,functionBindNative=!fails$8((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),NATIVE_BIND$1=functionBindNative,call$4=Function.prototype.call,functionCall=NATIVE_BIND$1?call$4.bind(call$4):function(){return call$4.apply(call$4,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable$1={}.propertyIsEnumerable,getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$1&&!$propertyIsEnumerable$1.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor$1(this,e);return!!t&&t.enumerable}:$propertyIsEnumerable$1;var createPropertyDescriptor$2=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},NATIVE_BIND=functionBindNative,FunctionPrototype$1=Function.prototype,bind=FunctionPrototype$1.bind,call$3=FunctionPrototype$1.call,uncurryThis$b=NATIVE_BIND&&bind.bind(call$3,call$3),functionUncurryThis=NATIVE_BIND?function(e){return e&&uncurryThis$b(e)}:function(e){return e&&function(){return call$3.apply(e,arguments)}},uncurryThis$a=functionUncurryThis,toString$1=uncurryThis$a({}.toString),stringSlice=uncurryThis$a("".slice),classofRaw$1=function(e){return stringSlice(toString$1(e),8,-1)},uncurryThis$9=functionUncurryThis,fails$7=fails$a,classof$2=classofRaw$1,$Object$3=Object,split=uncurryThis$9("".split),indexedObject=fails$7((function(){return!$Object$3("z").propertyIsEnumerable(0)}))?function(e){return"String"==classof$2(e)?split(e,""):$Object$3(e)}:$Object$3,isNullOrUndefined$3=function(e){return null==e},isNullOrUndefined$2=isNullOrUndefined$3,$TypeError$7=TypeError,requireObjectCoercible$2=function(e){if(isNullOrUndefined$2(e))throw $TypeError$7("Can't call method on "+e);return e},IndexedObject=indexedObject,requireObjectCoercible$1=requireObjectCoercible$2,toIndexedObject$4=function(e){return IndexedObject(requireObjectCoercible$1(e))},isCallable$d=function(e){return"function"==typeof e},isCallable$c=isCallable$d,documentAll="object"==typeof document&&document.all,SPECIAL_DOCUMENT_ALL=void 0===documentAll&&void 0!==documentAll,isObject$6=SPECIAL_DOCUMENT_ALL?function(e){return"object"==typeof e?null!==e:isCallable$c(e)||e===documentAll}:function(e){return"object"==typeof e?null!==e:isCallable$c(e)},global$a=global$b,isCallable$b=isCallable$d,aFunction=function(e){return isCallable$b(e)?e:void 0},getBuiltIn$5=function(e,t){return arguments.length<2?aFunction(global$a[e]):global$a[e]&&global$a[e][t]},uncurryThis$8=functionUncurryThis,objectIsPrototypeOf=uncurryThis$8({}.isPrototypeOf),getBuiltIn$4=getBuiltIn$5,engineUserAgent=getBuiltIn$4("navigator","userAgent")||"",global$9=global$b,userAgent=engineUserAgent,process=global$9.process,Deno=global$9.Deno,versions=process&&process.versions||Deno&&Deno.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent&&(match=userAgent.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION=engineV8Version,fails$6=fails$a,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$6((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41})),NATIVE_SYMBOL$1=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,getBuiltIn$3=getBuiltIn$5,isCallable$a=isCallable$d,isPrototypeOf=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$2=Object,isSymbol$2=USE_SYMBOL_AS_UID$1?function(e){return"symbol"==typeof e}:function(e){var t=getBuiltIn$3("Symbol");return isCallable$a(t)&&isPrototypeOf(t.prototype,$Object$2(e))},$String$1=String,tryToString$2=function(e){try{return $String$1(e)}catch(e){return"Object"}},isCallable$9=isCallable$d,tryToString$1=tryToString$2,$TypeError$6=TypeError,aCallable$2=function(e){if(isCallable$9(e))return e;throw $TypeError$6(tryToString$1(e)+" is not a function")},aCallable$1=aCallable$2,isNullOrUndefined$1=isNullOrUndefined$3,getMethod$1=function(e,t){var r=e[t];return isNullOrUndefined$1(r)?void 0:aCallable$1(r)},call$2=functionCall,isCallable$8=isCallable$d,isObject$5=isObject$6,$TypeError$5=TypeError,ordinaryToPrimitive$1=function(e,t){var r,o;if("string"===t&&isCallable$8(r=e.toString)&&!isObject$5(o=call$2(r,e)))return o;if(isCallable$8(r=e.valueOf)&&!isObject$5(o=call$2(r,e)))return o;if("string"!==t&&isCallable$8(r=e.toString)&&!isObject$5(o=call$2(r,e)))return o;throw $TypeError$5("Can't convert object to primitive value")},shared$3={exports:{}},global$8=global$b,defineProperty$1=Object.defineProperty,defineGlobalProperty$3=function(e,t){try{defineProperty$1(global$8,e,{value:t,configurable:!0,writable:!0})}catch(r){global$8[e]=t}return t},global$7=global$b,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$4=global$7[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$4,store$3=sharedStore;(shared$3.exports=function(e,t){return store$3[e]||(store$3[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.0",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible=requireObjectCoercible$2,$Object$1=Object,toObject$1=function(e){return $Object$1(requireObjectCoercible(e))},uncurryThis$7=functionUncurryThis,toObject=toObject$1,hasOwnProperty=uncurryThis$7({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(e,t){return hasOwnProperty(toObject(e),t)},uncurryThis$6=functionUncurryThis,id=0,postfix=Math.random(),toString=uncurryThis$6(1..toString),uid$2=function(e){return"Symbol("+(void 0===e?"":e)+")_"+toString(++id+postfix,36)},global$6=global$b,shared$2=shared$3.exports,hasOwn$6=hasOwnProperty_1,uid$1=uid$2,NATIVE_SYMBOL=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,WellKnownSymbolsStore=shared$2("wks"),Symbol$1=global$6.Symbol,symbolFor=Symbol$1&&Symbol$1.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$1,wellKnownSymbol$4=function(e){if(!hasOwn$6(WellKnownSymbolsStore,e)||!NATIVE_SYMBOL&&"string"!=typeof WellKnownSymbolsStore[e]){var t="Symbol."+e;NATIVE_SYMBOL&&hasOwn$6(Symbol$1,e)?WellKnownSymbolsStore[e]=Symbol$1[e]:WellKnownSymbolsStore[e]=USE_SYMBOL_AS_UID&&symbolFor?symbolFor(t):createWellKnownSymbol(t)}return WellKnownSymbolsStore[e]},call$1=functionCall,isObject$4=isObject$6,isSymbol$1=isSymbol$2,getMethod=getMethod$1,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$3=wellKnownSymbol$4,$TypeError$4=TypeError,TO_PRIMITIVE=wellKnownSymbol$3("toPrimitive"),toPrimitive$1=function(e,t){if(!isObject$4(e)||isSymbol$1(e))return e;var r,o=getMethod(e,TO_PRIMITIVE);if(o){if(void 0===t&&(t="default"),r=call$1(o,e,t),!isObject$4(r)||isSymbol$1(r))return r;throw $TypeError$4("Can't convert object to primitive value")}return void 0===t&&(t="number"),ordinaryToPrimitive(e,t)},toPrimitive=toPrimitive$1,isSymbol=isSymbol$2,toPropertyKey$2=function(e){var t=toPrimitive(e,"string");return isSymbol(t)?t:t+""},global$5=global$b,isObject$3=isObject$6,document$1=global$5.document,EXISTS$1=isObject$3(document$1)&&isObject$3(document$1.createElement),documentCreateElement=function(e){return EXISTS$1?document$1.createElement(e):{}},DESCRIPTORS$7=descriptors,fails$5=fails$a,createElement=documentCreateElement,ie8DomDefine=!DESCRIPTORS$7&&!fails$5((function(){return 7!=Object.defineProperty(createElement("div"),"a",{get:function(){return 7}}).a})),DESCRIPTORS$6=descriptors,call=functionCall,propertyIsEnumerableModule=objectPropertyIsEnumerable,createPropertyDescriptor$1=createPropertyDescriptor$2,toIndexedObject$3=toIndexedObject$4,toPropertyKey$1=toPropertyKey$2,hasOwn$5=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$6?$getOwnPropertyDescriptor$1:function(e,t){if(e=toIndexedObject$3(e),t=toPropertyKey$1(t),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$1(e,t)}catch(e){}if(hasOwn$5(e,t))return createPropertyDescriptor$1(!call(propertyIsEnumerableModule.f,e,t),e[t])};var objectDefineProperty={},DESCRIPTORS$5=descriptors,fails$4=fails$a,v8PrototypeDefineBug=DESCRIPTORS$5&&fails$4((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),isObject$2=isObject$6,$String=String,$TypeError$3=TypeError,anObject$4=function(e){if(isObject$2(e))return e;throw $TypeError$3($String(e)+" is not an object")},DESCRIPTORS$4=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,anObject$3=anObject$4,toPropertyKey=toPropertyKey$2,$TypeError$2=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$4?V8_PROTOTYPE_DEFINE_BUG?function(e,t,r){if(anObject$3(e),t=toPropertyKey(t),anObject$3(r),"function"==typeof e&&"prototype"===t&&"value"in r&&WRITABLE in r&&!r[WRITABLE]){var o=$getOwnPropertyDescriptor(e,t);o&&o[WRITABLE]&&(e[t]=r.value,r={configurable:CONFIGURABLE$1 in r?r[CONFIGURABLE$1]:o[CONFIGURABLE$1],enumerable:ENUMERABLE in r?r[ENUMERABLE]:o[ENUMERABLE],writable:!1})}return $defineProperty(e,t,r)}:$defineProperty:function(e,t,r){if(anObject$3(e),t=toPropertyKey(t),anObject$3(r),IE8_DOM_DEFINE)try{return $defineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw $TypeError$2("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var DESCRIPTORS$3=descriptors,definePropertyModule$2=objectDefineProperty,createPropertyDescriptor=createPropertyDescriptor$2,createNonEnumerableProperty$2=DESCRIPTORS$3?function(e,t,r){return definePropertyModule$2.f(e,t,createPropertyDescriptor(1,r))}:function(e,t,r){return e[t]=r,e},makeBuiltIn$2={exports:{}},DESCRIPTORS$2=descriptors,hasOwn$4=hasOwnProperty_1,FunctionPrototype=Function.prototype,getDescriptor=DESCRIPTORS$2&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$4(FunctionPrototype,"name"),PROPER=EXISTS&&"something"===function(){}.name,CONFIGURABLE=EXISTS&&(!DESCRIPTORS$2||DESCRIPTORS$2&&getDescriptor(FunctionPrototype,"name").configurable),functionName={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE},uncurryThis$5=functionUncurryThis,isCallable$7=isCallable$d,store$2=sharedStore,functionToString=uncurryThis$5(Function.toString);isCallable$7(store$2.inspectSource)||(store$2.inspectSource=function(e){return functionToString(e)});var inspectSource$2=store$2.inspectSource,global$4=global$b,isCallable$6=isCallable$d,WeakMap$1=global$4.WeakMap,weakMapBasicDetection=isCallable$6(WeakMap$1)&&/native code/.test(String(WeakMap$1)),shared$1=shared$3.exports,uid=uid$2,keys=shared$1("keys"),sharedKey$1=function(e){return keys[e]||(keys[e]=uid(e))},hiddenKeys$3={},NATIVE_WEAK_MAP=weakMapBasicDetection,global$3=global$b,uncurryThis$4=functionUncurryThis,isObject$1=isObject$6,createNonEnumerableProperty$1=createNonEnumerableProperty$2,hasOwn$3=hasOwnProperty_1,shared=sharedStore,sharedKey=sharedKey$1,hiddenKeys$2=hiddenKeys$3,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$1=global$3.TypeError,WeakMap=global$3.WeakMap,set,get,has,enforce=function(e){return has(e)?get(e):set(e,{})},getterFor=function(e){return function(t){var r;if(!isObject$1(t)||(r=get(t)).type!==e)throw TypeError$1("Incompatible receiver, "+e+" required");return r}};if(NATIVE_WEAK_MAP||shared.state){var store$1=shared.state||(shared.state=new WeakMap),wmget=uncurryThis$4(store$1.get),wmhas=uncurryThis$4(store$1.has),wmset=uncurryThis$4(store$1.set);set=function(e,t){if(wmhas(store$1,e))throw TypeError$1(OBJECT_ALREADY_INITIALIZED);return t.facade=e,wmset(store$1,e,t),t},get=function(e){return wmget(store$1,e)||{}},has=function(e){return wmhas(store$1,e)}}else{var STATE=sharedKey("state");hiddenKeys$2[STATE]=!0,set=function(e,t){if(hasOwn$3(e,STATE))throw TypeError$1(OBJECT_ALREADY_INITIALIZED);return t.facade=e,createNonEnumerableProperty$1(e,STATE,t),t},get=function(e){return hasOwn$3(e,STATE)?e[STATE]:{}},has=function(e){return hasOwn$3(e,STATE)}}var internalState={set:set,get:get,has:has,enforce:enforce,getterFor:getterFor},fails$3=fails$a,isCallable$5=isCallable$d,hasOwn$2=hasOwnProperty_1,DESCRIPTORS$1=descriptors,CONFIGURABLE_FUNCTION_NAME=functionName.CONFIGURABLE,inspectSource$1=inspectSource$2,InternalStateModule=internalState,enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,defineProperty=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS$1&&!fails$3((function(){return 8!==defineProperty((function(){}),"length",{value:8}).length})),TEMPLATE=String(String).split("String"),makeBuiltIn$1=makeBuiltIn$2.exports=function(e,t,r){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!hasOwn$2(e,"name")||CONFIGURABLE_FUNCTION_NAME&&e.name!==t)&&(DESCRIPTORS$1?defineProperty(e,"name",{value:t,configurable:!0}):e.name=t),CONFIGURABLE_LENGTH&&r&&hasOwn$2(r,"arity")&&e.length!==r.arity&&defineProperty(e,"length",{value:r.arity});try{r&&hasOwn$2(r,"constructor")&&r.constructor?DESCRIPTORS$1&&defineProperty(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var o=enforceInternalState(e);return hasOwn$2(o,"source")||(o.source=TEMPLATE.join("string"==typeof t?t:"")),e};Function.prototype.toString=makeBuiltIn$1((function(){return isCallable$5(this)&&getInternalState(this).source||inspectSource$1(this)}),"toString");var isCallable$4=isCallable$d,definePropertyModule$1=objectDefineProperty,makeBuiltIn=makeBuiltIn$2.exports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$2=function(e,t,r,o){o||(o={});var n=o.enumerable,i=void 0!==o.name?o.name:t;if(isCallable$4(r)&&makeBuiltIn(r,i,o),o.global)n?e[t]=r:defineGlobalProperty$1(t,r);else{try{o.unsafe?e[t]&&(n=!0):delete e[t]}catch(e){}n?e[t]=r:definePropertyModule$1.f(e,t,{value:r,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e},objectGetOwnPropertyNames={},ceil=Math.ceil,floor=Math.floor,mathTrunc=Math.trunc||function(e){var t=+e;return(t>0?floor:ceil)(t)},trunc=mathTrunc,toIntegerOrInfinity$2=function(e){var t=+e;return t!=t||0===t?0:trunc(t)},toIntegerOrInfinity$1=toIntegerOrInfinity$2,max=Math.max,min$1=Math.min,toAbsoluteIndex$1=function(e,t){var r=toIntegerOrInfinity$1(e);return r<0?max(r+t,0):min$1(r,t)},toIntegerOrInfinity=toIntegerOrInfinity$2,min=Math.min,toLength$1=function(e){return e>0?min(toIntegerOrInfinity(e),9007199254740991):0},toLength=toLength$1,lengthOfArrayLike$1=function(e){return toLength(e.length)},toIndexedObject$2=toIndexedObject$4,toAbsoluteIndex=toAbsoluteIndex$1,lengthOfArrayLike=lengthOfArrayLike$1,createMethod$1=function(e){return function(t,r,o){var n,i=toIndexedObject$2(t),s=lengthOfArrayLike(i),a=toAbsoluteIndex(o,s);if(e&&r!=r){for(;s>a;)if((n=i[a++])!=n)return!0}else for(;s>a;a++)if((e||a in i)&&i[a]===r)return e||a||0;return!e&&-1}},arrayIncludes={includes:createMethod$1(!0),indexOf:createMethod$1(!1)},uncurryThis$3=functionUncurryThis,hasOwn$1=hasOwnProperty_1,toIndexedObject$1=toIndexedObject$4,indexOf=arrayIncludes.indexOf,hiddenKeys$1=hiddenKeys$3,push$1=uncurryThis$3([].push),objectKeysInternal=function(e,t){var r,o=toIndexedObject$1(e),n=0,i=[];for(r in o)!hasOwn$1(hiddenKeys$1,r)&&hasOwn$1(o,r)&&push$1(i,r);for(;t.length>n;)hasOwn$1(o,r=t[n++])&&(~indexOf(i,r)||push$1(i,r));return i},enumBugKeys$2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$1=enumBugKeys$2,hiddenKeys=enumBugKeys$1.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(e){return internalObjectKeys$1(e,hiddenKeys)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$2=getBuiltIn$5,uncurryThis$2=functionUncurryThis,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,anObject$2=anObject$4,concat=uncurryThis$2([].concat),ownKeys$1=getBuiltIn$2("Reflect","ownKeys")||function(e){var t=getOwnPropertyNamesModule.f(anObject$2(e)),r=getOwnPropertySymbolsModule.f;return r?concat(t,r(e)):t},hasOwn=hasOwnProperty_1,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule=objectDefineProperty,copyConstructorProperties$1=function(e,t,r){for(var o=ownKeys(t),n=definePropertyModule.f,i=getOwnPropertyDescriptorModule.f,s=0;s<o.length;s++){var a=o[s];hasOwn(e,a)||r&&hasOwn(r,a)||n(e,a,i(t,a))}},fails$2=fails$a,isCallable$3=isCallable$d,replacement=/#|\.prototype\./,isForced$1=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&(isCallable$3(t)?fails$2(t):!!t)},normalize=isForced$1.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced$1.data={},NATIVE=isForced$1.NATIVE="N",POLYFILL=isForced$1.POLYFILL="P",isForced_1=isForced$1,global$2=global$b,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty=createNonEnumerableProperty$2,defineBuiltIn$1=defineBuiltIn$2,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties=copyConstructorProperties$1,isForced=isForced_1,_export=function(e,t){var r,o,n,i,s,a=e.target,l=e.global,c=e.stat;if(r=l?global$2:c?global$2[a]||defineGlobalProperty(a,{}):(global$2[a]||{}).prototype)for(o in t){if(i=t[o],n=e.dontCallGetSet?(s=getOwnPropertyDescriptor(r,o))&&s.value:r[o],!isForced(l?o:a+(c?".":"#")+o,e.forced)&&void 0!==n){if(typeof i==typeof n)continue;copyConstructorProperties(i,n)}(e.sham||n&&n.sham)&&createNonEnumerableProperty(i,"sham",!0),defineBuiltIn$1(r,o,i,e)}},global$1=global$b,promiseNativeConstructor=global$1.Promise,wellKnownSymbol$2=wellKnownSymbol$4,TO_STRING_TAG$1=wellKnownSymbol$2("toStringTag"),test={};test[TO_STRING_TAG$1]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG_SUPPORT=toStringTagSupport,isCallable$2=isCallable$d,classofRaw=classofRaw$1,wellKnownSymbol$1=wellKnownSymbol$4,TO_STRING_TAG=wellKnownSymbol$1("toStringTag"),$Object=Object,CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof$1=TO_STRING_TAG_SUPPORT?classofRaw:function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=$Object(e),TO_STRING_TAG))?r:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(o=classofRaw(t))&&isCallable$2(t.callee)?"Arguments":o},uncurryThis$1=functionUncurryThis,fails$1=fails$a,isCallable$1=isCallable$d,classof=classof$1,getBuiltIn$1=getBuiltIn$5,inspectSource=inspectSource$2,noop=function(){},empty=[],construct=getBuiltIn$1("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis$1(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function(e){if(!isCallable$1(e))return!1;try{return construct(noop,empty,e),!0}catch(e){return!1}},isConstructorLegacy=function(e){if(!isCallable$1(e))return!1;switch(classof(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(e))}catch(e){return!0}};isConstructorLegacy.sham=!0;var isConstructor$1=!construct||fails$1((function(){var e;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern((function(){e=!0}))||e}))?isConstructorLegacy:isConstructorModern,isConstructor=isConstructor$1,tryToString=tryToString$2,$TypeError$1=TypeError,aConstructor$1=function(e){if(isConstructor(e))return e;throw $TypeError$1(tryToString(e)+" is not a constructor")},anObject$1=anObject$4,aConstructor=aConstructor$1,isNullOrUndefined=isNullOrUndefined$3,wellKnownSymbol=wellKnownSymbol$4,SPECIES=wellKnownSymbol("species"),speciesConstructor$1=function(e,t){var r,o=anObject$1(e).constructor;return void 0===o||isNullOrUndefined(r=anObject$1(o)[SPECIES])?t:aConstructor(r)},newPromiseCapability$1={},aCallable=aCallable$2,$TypeError=TypeError,PromiseCapability=function(e){var t,r;this.promise=new e((function(e,o){if(void 0!==t||void 0!==r)throw $TypeError("Bad Promise constructor");t=e,r=o})),this.resolve=aCallable(t),this.reject=aCallable(r)};newPromiseCapability$1.f=function(e){return new PromiseCapability(e)};var anObject=anObject$4,isObject=isObject$6,newPromiseCapability=newPromiseCapability$1,promiseResolve$1=function(e,t){if(anObject(e),isObject(t)&&t.constructor===e)return t;var r=newPromiseCapability.f(e);return(0,r.resolve)(t),r.promise},$$1=_export,NativePromiseConstructor=promiseNativeConstructor,fails=fails$a,getBuiltIn=getBuiltIn$5,isCallable=isCallable$d,speciesConstructor=speciesConstructor$1,promiseResolve=promiseResolve$1,defineBuiltIn=defineBuiltIn$2,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,NON_GENERIC=!!NativePromiseConstructor&&fails((function(){NativePromisePrototype.finally.call({then:function(){}},(function(){}))}));if($$1({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(e){var t=speciesConstructor(this,getBuiltIn("Promise")),r=isCallable(e);return this.then(r?function(r){return promiseResolve(t,e()).then((function(){return r}))}:e,r?function(r){return promiseResolve(t,e()).then((function(){throw r}))}:e)}}),isCallable(NativePromiseConstructor)){var method=getBuiltIn("Promise").prototype.finally;NativePromisePrototype.finally!==method&&defineBuiltIn(NativePromisePrototype,"finally",method,{unsafe:!0})}var internalObjectKeys=objectKeysInternal,enumBugKeys=enumBugKeys$2,objectKeys$1=Object.keys||function(e){return internalObjectKeys(e,enumBugKeys)},DESCRIPTORS=descriptors,uncurryThis=functionUncurryThis,objectKeys=objectKeys$1,toIndexedObject=toIndexedObject$4,$propertyIsEnumerable=objectPropertyIsEnumerable.f,propertyIsEnumerable=uncurryThis($propertyIsEnumerable),push=uncurryThis([].push),createMethod=function(e){return function(t){for(var r,o=toIndexedObject(t),n=objectKeys(o),i=n.length,s=0,a=[];i>s;)r=n[s++],DESCRIPTORS&&!propertyIsEnumerable(o,r)||push(a,e?[r,o[r]]:o[r]);return a}},objectToArray={entries:createMethod(!0),values:createMethod(!1)},$=_export,$entries=objectToArray.entries;$({target:"Object",stat:!0},{entries:function(e){return $entries(e)}});class EventEmitter{constructor(){this.handlers=[]}on(e){return this.handlers.push(e),this}emit(...e){this.handlers.forEach((t=>t.apply(this,e)))}off(e){const t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()}clear(){this.handlers=[]}}function createSignal(){const e=new EventEmitter;function t(t){return e.on(t)}return t.emit=(...t)=>e.emit(...t),t.off=t=>e.off(t),t.clear=()=>e.clear(),t}class Store{constructor(){this.stateEmitter=new EventEmitter,this.serverEventEmitter=new EventEmitter,this._state={state:0,openId:"",appId:"",serviceToken:"",playerId:"",lastRoomId:"",roomId:"",groupId:""},this._serverEventCode=0}get state(){return this._state.state}get serverEventCode(){return this._serverEventCode}get appId(){return this._state.appId}get serviceToken(){return this._state.serviceToken}get playerId(){return this._state.playerId}get lastRoomId(){return this._state.lastRoomId}get roomId(){return this._state.roomId}get groupId(){return this._state.groupId}get openId(){return this._state.openId}setStateAction(e){if(e==this._state.state)return;const t=this._state.state;this._state.state=e,this.stateEmitter.emit(e,t)}setServerEventAction(e,t){const r={eventType:this._serverEventCode,eventParam:t};this._serverEventCode=e;const o={eventType:e,eventParam:t};this.serverEventEmitter.emit(o,r)}setAppIdAction(e){this._state.appId=e}setOpenIdAction(e){this._state.openId=e}setServiceTokenAction(e){this._state.serviceToken=e}setPlayerIdAction(e){this._state.playerId=e}setLastRoomIdAction(e){this._state.lastRoomId=e}setRoomIdAction(e){this._state.roomId=e}setGroupIdAction(e){this._state.groupId=e}addServerEventListener(e){this.serverEventEmitter.on(e)}}var store=new Store;class Base{get state(){return store.state}get serverEventCode(){return store.serverEventCode}get appId(){return store.appId}get openId(){return store.openId}get serviceToken(){return store.serviceToken}get playerId(){return store.playerId}get lastRoomId(){return store.lastRoomId}get roomId(){return store.roomId}get groupId(){return store.groupId}constructor(){store.addServerEventListener(((...e)=>this.onServerEventChange(...e)))}setState(e){store.setStateAction(e)}setServerEvent(e,t=""){store.setServerEventAction(e,t)}setAppId(e){store.setAppIdAction(e)}setOpenId(e){store.setOpenIdAction(e)}setServiceToken(e){store.setServiceTokenAction(e)}setPlayerId(e){store.setPlayerIdAction(e)}setLastRoomId(e){store.setLastRoomIdAction(e)}setRoomId(e){store.setRoomIdAction(e)}setGroupId(e){store.setGroupIdAction(e)}onServerEventChange(e,t){}}function __awaiter(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))}class GOBEError extends Error{constructor(e,t){super(t),this.code=e,this.name="GOBE Error",Object.setPrototypeOf(this,new.target.prototype)}}const generateRequestId=()=>{var e;let t=null;if("undefined"!=typeof globalThis)t=globalThis;else if("undefined"!=typeof global)t=global;else{if("undefined"==typeof self)return Math.random().toString().slice(2);t=self}if("function"==typeof(null===(e=t.crypto)||void 0===e?void 0:e.getRandomValues)){const e=new Uint32Array(1);if(null!=t.crypto.getRandomValues(e)){return t.crypto.getRandomValues(e)[0].toString()}}return Math.random().toString().slice(2)};class Request{static post(e,t,r,o=!0){const n=/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?e:"https://gobe-drcn.game.dbankcloud.cn"+e;return new Promise(((i,s)=>{var a;const l=new XMLHttpRequest;l.open("POST",n,!0),l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.setRequestHeader("sdkType","js"),l.withCredentials=!1,l.timeout=Request.timeout;e.includes("gamex-edge-service")&&(l.setRequestHeader("sdkVersionCode","10108300"),(null===(a=store.serviceToken)||void 0===a?void 0:a.length)>0&&l.setRequestHeader("serviceToken",store.serviceToken),l.setRequestHeader("appId",store.appId),l.setRequestHeader("requestId",generateRequestId())),r&&Object.entries(r).forEach((([e,t])=>l.setRequestHeader(e,t))),l.send(JSON.stringify(t)),l.onerror=function(e){s(e)},l.ontimeout=function(e){s(e)},l.onreadystatechange=function(){if(4==l.readyState)if(200==l.status){const e=JSON.parse(l.responseText);o&&0!=e.rtnCode&&s(new GOBEError(e.rtnCode,e.msg)),i(e)}else s({data:l.responseText,status:l.status,statusText:l.statusText,headers:l.getAllResponseHeaders(),request:l})}}))}}Request.timeout=5e3;class Auth extends Base{constructor(e,t,r,o){super(),this.clientId=e,this.clientSecret=t,this.createSignature=r,this.accessToken=o}requestAccessToken(){return __awaiter(this,void 0,void 0,(function*(){const e=yield Request.post("https://connect-drcn.hispace.dbankcloud.cn/agc/apigw/oauth2/v1/token",{grant_type:"client_credentials",client_id:this.clientId,client_secret:this.clientSecret,useJwt:0},{app_id:this.appId},!1);if("ret"in e)throw new Error(e.ret.msg);return e.access_token}))}requestServiceToken(e,t){return Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.player.login",cpAccessToken:e,clientId:this.clientId,openId:this.openId},t))}requestGameConfig(){return Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.config.param"})}login(){var e;return __awaiter(this,void 0,void 0,(function*(){const t=this.accessToken&&0!=(null===(e=this.accessToken)||void 0===e?void 0:e.length)?this.accessToken:yield this.requestAccessToken(),r=this.createSignature?yield this.createSignature():void 0,{serviceToken:o,playerId:n,lastRoomId:i,timeStamp:s}=yield this.requestServiceToken(t,r);this.setState(1),this.setServiceToken(o),this.setPlayerId(n),this.setLastRoomId(i);return{gameInfo:(yield this.requestGameConfig()).configParam,timeStamp:s}}))}}class Player extends Base{constructor(e,t){super(),this.customStatus=e,this.customProperties=t}updateCustomStatus(e){return __awaiter(this,void 0,void 0,(function*(){return yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.custom.player.status.update",customPlayerStatus:e}),this.customStatus=e,this}))}updateCustomProperties(e){return __awaiter(this,void 0,void 0,(function*(){return yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.custom.player.properties.update",customPlayerProperties:e}),this.customProperties=e,this}))}}var PlatformType,LogLevel;exports.PlatformType=void 0,PlatformType=exports.PlatformType||(exports.PlatformType={}),PlatformType[PlatformType.WEB=0]="WEB",PlatformType[PlatformType.CC_ANDROID=1]="CC_ANDROID";class Platform{}Platform.platform=exports.PlatformType.WEB,Platform.cerPath="";class WebSocketTransport{constructor(e){this.events=e,this.ws=null}connect(e){var t,r,o,n;Platform.platform===exports.PlatformType.CC_ANDROID?this.ws=new WebSocket(e,this.protocols,Platform.cerPath):this.ws=new WebSocket(e,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=null!==(t=this.events.onopen)&&void 0!==t?t:null,this.ws.onmessage=null!==(r=this.events.onmessage)&&void 0!==r?r:null,this.ws.onclose=null!==(o=this.events.onclose)&&void 0!==o?o:null,this.ws.onerror=null!==(n=this.events.onerror)&&void 0!==n?n:null}wsIsOpen(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}send(e){var t,r;e instanceof ArrayBuffer?null===(t=this.ws)||void 0===t||t.send(e):null===(r=this.ws)||void 0===r||r.send(new Uint8Array(e).buffer)}close(e,t){var r,o;Platform.platform===exports.PlatformType.CC_ANDROID?null===(r=this.ws)||void 0===r||r.close(e=1e3,t="Bye"):null===(o=this.ws)||void 0===o||o.close(e,t)}}class Connection{constructor(e=WebSocketTransport){this.events={},this.transport=new e(this.events)}connect(e){this.transport.connect(e)}send(e){this.transport.send(e)}close(e,t){this.transport.close(e,t)}wsIsOpen(){return this.transport.wsIsOpen()}}!function(e){e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.ERROR=3]="ERROR",e[e.OFF=4]="OFF"}(LogLevel||(LogLevel={}));class Logger{static debug(e){Logger.level===LogLevel.DEBUG&&console.debug("[GOBE DEBUG]:",Object.assign({timestamp:Date.now()},e))}static info(e){Logger.level!==LogLevel.DEBUG&&Logger.level!==LogLevel.INFO||console.info("[GOBE INFO]:",Object.assign({timestamp:Date.now()},e))}static error(e){Logger.level!==LogLevel.DEBUG&&Logger.level!==LogLevel.INFO&&Logger.level!==LogLevel.ERROR||console.error("[GOBE ERROR]:",Object.assign({timestamp:Date.now()},e))}}Logger.level=LogLevel.OFF;class Heartbeat extends Base{constructor(){super(),this.httpHeartBeatSwitch=!1}startHttpHeartBeat(){this.httpHeartBeatSwitch||(this.httpHeartBeatSwitch=!0,this.execute())}stopHttpHeartBeat(){this.httpHeartBeatSwitch=!1}execute(){if(this.httpHeartBeatSwitch){let e=this.state;switch(e){case 4:case 5:e=1;break;case 7:case 6:e=2}const t=[1,2,3].includes(e),r=Heartbeat.httpHeartBeatCycle;t?this.send(e).finally((()=>{this.delay(this.execute,r)})):this.delay(this.execute,r)}}delay(e,t){setTimeout(e.bind(this),t)}send(e=this.state,t=this.roomId){return Logger.debug({eventType:"notify",playerId:this.playerId,roomId:t,state:e}),Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.event.notify",eventType:e,roomId:t}).then((e=>{if(e.events)for(const t of e.events)this.setServerEvent(t.eventType,t.eventParam)})).catch((()=>{Logger.error({eventType:"notify_error",playerId:this.playerId,roomId:t,state:e})}))}}Heartbeat.httpHeartBeatCycle=3e3;var heartbeat=new Heartbeat,protobuf={exports:{}};(function(module){(function(undefined$1){!function(e,t,r){var o=function r(o){var n=t[o];return n||e[o][0].call(n=t[o]={exports:{}},r,n,n.exports),n.exports}(r[0]);o.util.global.protobuf=o,"function"==typeof undefined$1&&undefined$1.amd&&undefined$1(["long"],(function(e){return e&&e.isLong&&(o.util.Long=e,o.configure()),o})),module&&module.exports&&(module.exports=o)}({1:[function(e,t,r){t.exports=function(e,t){var r=new Array(arguments.length-1),o=0,n=2,i=!0;for(;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,s){r[o]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},{}],2:[function(e,t,r){var o=r;o.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;o.encode=function(e,t,r){for(var o,i=null,s=[],a=0,l=0;t<r;){var c=e[t++];switch(l){case 0:s[a++]=n[c>>2],o=(3&c)<<4,l=1;break;case 1:s[a++]=n[o|c>>4],o=(15&c)<<2,l=2;break;case 2:s[a++]=n[o|c>>6],s[a++]=n[63&c],l=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=n[o],s[a++]=61,1===l&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";o.decode=function(e,t,r){for(var o,n=r,s=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&s>1)break;if((c=i[c])===undefined$1)throw Error(a);switch(s){case 0:o=c,s=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,s=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,s=3;break;case 3:t[r++]=(3&o)<<6|c,s=0}}if(1===s)throw Error(a);return r-n},o.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,r){function o(){this._listeners={}}t.exports=o,o.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},o.prototype.off=function(e,t){if(e===undefined$1)this._listeners={};else if(t===undefined$1)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},{}],4:[function(e,t,r){function o(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function i(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function a(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:i,e.writeFloatBE=o?i:n,e.readFloatLE=o?s:a,e.readFloatBE=o?a:s}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var i=Math.floor(Math.log(t)/Math.LN2);e((n<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,o)}}function r(e,t,r){var o=e(t,r),n=2*(o>>31)+1,i=o>>>23&255,s=8388607&o;return 255===i?s?NaN:n*(1/0):0===i?1401298464324817e-60*n*s:n*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function i(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function s(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function a(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:i,e.writeDoubleBE=o?i:n,e.readDoubleLE=o?s:a,e.readDoubleBE=o?a:s}():function(){function t(e,t,r,o,n,i){var s=o<0?1:0;if(s&&(o=-o),0===o)e(0,n,i+t),e(1/o>0?0:2147483648,n,i+r);else if(isNaN(o))e(0,n,i+t),e(2146959360,n,i+r);else if(o>17976931348623157e292)e(0,n,i+t),e((s<<31|2146435072)>>>0,n,i+r);else{var a;if(o<22250738585072014e-324)e((a=o/5e-324)>>>0,n,i+t),e((s<<31|a/4294967296)>>>0,n,i+r);else{var l=Math.floor(Math.log(o)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=o*Math.pow(2,-l))>>>0,n,i+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,n,i+r)}}}function r(e,t,r,o,n){var i=e(o,n+t),s=e(o,n+r),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+i;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,s,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=o(o)},{}],5:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],6:[function(e,t,r){t.exports=function(e,t,r){var o=r||8192,n=o>>>1,i=null,s=o;return function(r){if(r<1||r>n)return e(r);s+r>o&&(i=e(o),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},{}],7:[function(e,t,r){var o=r;o.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},o.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,i=[],s=0;t<r;)(o=e[t++])<128?i[s++]=o:o>191&&o<224?i[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(o>>10),i[s++]=56320+(1023&o)):i[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))},o.write=function(e,t,r){for(var o,n,i=r,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&n),++s,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-i}},{}],8:[function(e,t,r){var o=r;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=e(16),o.BufferWriter=e(17),o.Reader=e(9),o.BufferReader=e(10),o.util=e(15),o.rpc=e(12),o.roots=e(11),o.configure=n,n()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(e,t,r){t.exports=l;var o,n=e(15),i=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(l.create=function(e){return n.Buffer.isBuffer(e)?new o(e):u(e)})(e)}:u};function m(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){o=e,l.create=d(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(l.prototype,{int64:function(){return m.call(this)[t](!1)},uint64:function(){return m.call(this)[t](!0)},sint64:function(){return m.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},{15:15}],10:[function(e,t,r){t.exports=i;var o=e(9);(i.prototype=Object.create(o.prototype)).constructor=i;var n=e(15);function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},{15:15,9:9}],11:[function(e,t,r){t.exports={}},{}],12:[function(e,t,r){r.Service=e(13)},{13:13}],13:[function(e,t,r){t.exports=n;var o=e(15);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return o.asPromise(e,a,t,r,n,i);if(!a.rpcImpl)return setTimeout((function(){s(Error("already ended"))}),0),undefined$1;try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null===r)return a.end(!0),undefined$1;if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){s(e)}),0),undefined$1}},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{15:15}],14:[function(e,t,r){t.exports=n;var o=e(15);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},{15:15}],15:[function(e,t,r){var o=r;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)e[o[n]]!==undefined$1&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=e(1),o.base64=e(2),o.EventEmitter=e(3),o.float=e(4),o.inquire=e(5),o.utf8=e(7),o.pool=e(6),o.LongBits=e(14),o.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),o.global=o.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&this[e[r]]!==undefined$1&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(e,t,r){t.exports=d;var o,n=e(15),i=n.LongBits,s=n.base64,a=n.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=undefined$1,this.val=r}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var m=function(){return n.Buffer?function(){return(d.create=function(){return new o})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function h(e,t){this.len=e,this.next=undefined$1,this.val=t}function f(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=m(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},h.prototype=Object.create(l.prototype),h.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(f,10,i.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=i.from(e);return this._push(f,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(f,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var y=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){o=e,d.create=m(),o._configure()}},{15:15}],17:[function(e,t,r){t.exports=i;var o=e(16);(i.prototype=Object.create(o.prototype)).constructor=i;var n=e(15);function i(){o.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},{15:15,16:16}]},{},[8])})()})(protobuf);var $protobuf=protobuf.exports,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={}),valuesById,values,contant,constant,common,grpc,gobes,game;$root.game=(game={},game.gobes=((gobes={}).grpc=((grpc={}).common=((common={}).dto=function(){var e={};return e.AckMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.rtnCode=0,e.prototype.msg="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.rtnCode&&Object.hasOwnProperty.call(e,"rtnCode")&&t.uint32(8).int32(e.rtnCode),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.AckMessage;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rtnCode=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.rtnCode&&e.hasOwnProperty("rtnCode")&&!$util.isInteger(e.rtnCode)?"rtnCode: integer expected":null!=e.msg&&e.hasOwnProperty("msg")&&!$util.isString(e.msg)?"msg: string expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.AckMessage)return e;var t=new $root.game.gobes.grpc.common.dto.AckMessage;return null!=e.rtnCode&&(t.rtnCode=0|e.rtnCode),null!=e.msg&&(t.msg=String(e.msg)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.rtnCode=0,r.msg=""),null!=e.rtnCode&&e.hasOwnProperty("rtnCode")&&(r.rtnCode=e.rtnCode),null!=e.msg&&e.hasOwnProperty("msg")&&(r.msg=e.msg),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.ClientFrame=function(){function e(e){if(this.data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.currentFrameId=0,e.prototype.data=$util.emptyArray,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.currentFrameId&&Object.hasOwnProperty.call(e,"currentFrameId")&&t.uint32(8).int32(e.currentFrameId),null!=e.data&&e.data.length)for(var r=0;r<e.data.length;++r)t.uint32(18).string(e.data[r]);return null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.ClientFrame;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.currentFrameId=e.int32();break;case 2:o.data&&o.data.length||(o.data=[]),o.data.push(e.string());break;case 3:o.timestamp=e.int64();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.currentFrameId&&e.hasOwnProperty("currentFrameId")&&!$util.isInteger(e.currentFrameId))return"currentFrameId: integer expected";if(null!=e.data&&e.hasOwnProperty("data")){if(!Array.isArray(e.data))return"data: array expected";for(var t=0;t<e.data.length;++t)if(!$util.isString(e.data[t]))return"data: string[] expected"}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.ClientFrame)return e;var t=new $root.game.gobes.grpc.common.dto.ClientFrame;if(null!=e.currentFrameId&&(t.currentFrameId=0|e.currentFrameId),e.data){if(!Array.isArray(e.data))throw TypeError(".game.gobes.grpc.common.dto.ClientFrame.data: array expected");t.data=[];for(var r=0;r<e.data.length;++r)t.data[r]=String(e.data[r])}return null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.data=[]),t.defaults)if(r.currentFrameId=0,$util.Long){var o=new $util.Long(0,0,!1);r.timestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestamp=t.longs===String?"0":0;if(null!=e.currentFrameId&&e.hasOwnProperty("currentFrameId")&&(r.currentFrameId=e.currentFrameId),e.data&&e.data.length){r.data=[];for(var n=0;n<e.data.length;++n)r.data[n]=e.data[n]}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.ClientMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.seq="",e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.msg=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(18).string(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(34).bytes(e.msg),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.ClientMessage;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.int32();break;case 2:o.seq=e.string();break;case 3:o.timestamp=e.int64();break;case 4:o.msg=e.bytes();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null!=e.seq&&e.hasOwnProperty("seq")&&!$util.isString(e.seq)?"seq: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null!=e.msg&&e.hasOwnProperty("msg")&&!(e.msg&&"number"==typeof e.msg.length||$util.isString(e.msg))?"msg: buffer expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.ClientMessage)return e;var t=new $root.game.gobes.grpc.common.dto.ClientMessage;return null!=e.code&&(t.code=0|e.code),null!=e.seq&&(t.seq=String(e.seq)),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.msg&&("string"==typeof e.msg?$util.base64.decode(e.msg,t.msg=$util.newBuffer($util.base64.length(e.msg)),0):e.msg.length&&(t.msg=e.msg)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.code=0,r.seq="",$util.Long){var o=new $util.Long(0,0,!1);r.timestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestamp=t.longs===String?"0":0;t.bytes===String?r.msg="":(r.msg=[],t.bytes!==Array&&(r.msg=$util.newBuffer(r.msg)))}return null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),null!=e.seq&&e.hasOwnProperty("seq")&&(r.seq=e.seq),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.msg&&e.hasOwnProperty("msg")&&(r.msg=t.bytes===String?$util.base64.encode(e.msg,0,e.msg.length):t.bytes===Array?Array.prototype.slice.call(e.msg):e.msg),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.FrameExtInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seed=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(8).int64(e.seed),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.FrameExtInfo;e.pos<r;){var n=e.uint32();n>>>3==1?o.seed=e.int64():e.skipType(7&n)}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.seed&&e.hasOwnProperty("seed")&&!($util.isInteger(e.seed)||e.seed&&$util.isInteger(e.seed.low)&&$util.isInteger(e.seed.high))?"seed: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.FrameExtInfo)return e;var t=new $root.game.gobes.grpc.common.dto.FrameExtInfo;return null!=e.seed&&($util.Long?(t.seed=$util.Long.fromValue(e.seed)).unsigned=!1:"string"==typeof e.seed?t.seed=parseInt(e.seed,10):"number"==typeof e.seed?t.seed=e.seed:"object"==typeof e.seed&&(t.seed=new $util.LongBits(e.seed.low>>>0,e.seed.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if($util.Long){var o=new $util.Long(0,0,!1);r.seed=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.seed=t.longs===String?"0":0;return null!=e.seed&&e.hasOwnProperty("seed")&&("number"==typeof e.seed?r.seed=t.longs===String?String(e.seed):e.seed:r.seed=t.longs===String?$util.Long.prototype.toString.call(e.seed):t.longs===Number?new $util.LongBits(e.seed.low>>>0,e.seed.high>>>0).toNumber():e.seed),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.FrameInfo=function(){function e(e){if(this.data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.playerId="",e.prototype.data=$util.emptyArray,e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.playerId&&Object.hasOwnProperty.call(e,"playerId")&&t.uint32(10).string(e.playerId),null!=e.data&&e.data.length)for(var r=0;r<e.data.length;++r)t.uint32(18).string(e.data[r]);return null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.FrameInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.playerId=e.string();break;case 2:o.data&&o.data.length||(o.data=[]),o.data.push(e.string());break;case 3:o.timestamp=e.int64();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.playerId&&e.hasOwnProperty("playerId")&&!$util.isString(e.playerId))return"playerId: string expected";if(null!=e.data&&e.hasOwnProperty("data")){if(!Array.isArray(e.data))return"data: array expected";for(var t=0;t<e.data.length;++t)if(!$util.isString(e.data[t]))return"data: string[] expected"}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.FrameInfo)return e;var t=new $root.game.gobes.grpc.common.dto.FrameInfo;if(null!=e.playerId&&(t.playerId=String(e.playerId)),e.data){if(!Array.isArray(e.data))throw TypeError(".game.gobes.grpc.common.dto.FrameInfo.data: array expected");t.data=[];for(var r=0;r<e.data.length;++r)t.data[r]=String(e.data[r])}return null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.data=[]),t.defaults)if(r.playerId="",$util.Long){var o=new $util.Long(0,0,!1);r.timestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestamp=t.longs===String?"0":0;if(null!=e.playerId&&e.hasOwnProperty("playerId")&&(r.playerId=e.playerId),e.data&&e.data.length){r.data=[];for(var n=0;n<e.data.length;++n)r.data[n]=e.data[n]}return null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.InstantMessage=function(){function e(e){if(this.dstPlayers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.imType=0,e.prototype.dstPlayers=$util.emptyArray,e.prototype.srcPlayer="",e.prototype.msg="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.imType&&Object.hasOwnProperty.call(e,"imType")&&t.uint32(8).int32(e.imType),null!=e.dstPlayers&&e.dstPlayers.length)for(var r=0;r<e.dstPlayers.length;++r)t.uint32(18).string(e.dstPlayers[r]);return null!=e.srcPlayer&&Object.hasOwnProperty.call(e,"srcPlayer")&&t.uint32(26).string(e.srcPlayer),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(34).string(e.msg),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.InstantMessage;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.imType=e.int32();break;case 2:o.dstPlayers&&o.dstPlayers.length||(o.dstPlayers=[]),o.dstPlayers.push(e.string());break;case 3:o.srcPlayer=e.string();break;case 4:o.msg=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.imType&&e.hasOwnProperty("imType"))switch(e.imType){default:return"imType: enum value expected";case 0:case 1:case 2:}if(null!=e.dstPlayers&&e.hasOwnProperty("dstPlayers")){if(!Array.isArray(e.dstPlayers))return"dstPlayers: array expected";for(var t=0;t<e.dstPlayers.length;++t)if(!$util.isString(e.dstPlayers[t]))return"dstPlayers: string[] expected"}return null!=e.srcPlayer&&e.hasOwnProperty("srcPlayer")&&!$util.isString(e.srcPlayer)?"srcPlayer: string expected":null!=e.msg&&e.hasOwnProperty("msg")&&!$util.isString(e.msg)?"msg: string expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.InstantMessage)return e;var t=new $root.game.gobes.grpc.common.dto.InstantMessage;switch(e.imType){case"ROOM":case 0:t.imType=0;break;case"ROOM_EXCEPT_SENDER":case 1:t.imType=1;break;case"PLAYERS":case 2:t.imType=2}if(e.dstPlayers){if(!Array.isArray(e.dstPlayers))throw TypeError(".game.gobes.grpc.common.dto.InstantMessage.dstPlayers: array expected");t.dstPlayers=[];for(var r=0;r<e.dstPlayers.length;++r)t.dstPlayers[r]=String(e.dstPlayers[r])}return null!=e.srcPlayer&&(t.srcPlayer=String(e.srcPlayer)),null!=e.msg&&(t.msg=String(e.msg)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.dstPlayers=[]),t.defaults&&(r.imType=t.enums===String?"ROOM":0,r.srcPlayer="",r.msg=""),null!=e.imType&&e.hasOwnProperty("imType")&&(r.imType=t.enums===String?$root.game.gobes.grpc.common.constant.InstantMessageType[e.imType]:e.imType),e.dstPlayers&&e.dstPlayers.length){r.dstPlayers=[];for(var o=0;o<e.dstPlayers.length;++o)r.dstPlayers[o]=e.dstPlayers[o]}return null!=e.srcPlayer&&e.hasOwnProperty("srcPlayer")&&(r.srcPlayer=e.srcPlayer),null!=e.msg&&e.hasOwnProperty("msg")&&(r.msg=e.msg),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.PlayerInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.playerId="",e.prototype.customState=0,e.prototype.extraInfo="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.playerId&&Object.hasOwnProperty.call(e,"playerId")&&t.uint32(10).string(e.playerId),null!=e.customState&&Object.hasOwnProperty.call(e,"customState")&&t.uint32(16).int32(e.customState),null!=e.extraInfo&&Object.hasOwnProperty.call(e,"extraInfo")&&t.uint32(26).string(e.extraInfo),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.PlayerInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.playerId=e.string();break;case 2:o.customState=e.int32();break;case 3:o.extraInfo=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.playerId&&e.hasOwnProperty("playerId")&&!$util.isString(e.playerId)?"playerId: string expected":null!=e.customState&&e.hasOwnProperty("customState")&&!$util.isInteger(e.customState)?"customState: integer expected":null!=e.extraInfo&&e.hasOwnProperty("extraInfo")&&!$util.isString(e.extraInfo)?"extraInfo: string expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.PlayerInfo)return e;var t=new $root.game.gobes.grpc.common.dto.PlayerInfo;return null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.customState&&(t.customState=0|e.customState),null!=e.extraInfo&&(t.extraInfo=String(e.extraInfo)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.playerId="",r.customState=0,r.extraInfo=""),null!=e.playerId&&e.hasOwnProperty("playerId")&&(r.playerId=e.playerId),null!=e.customState&&e.hasOwnProperty("customState")&&(r.customState=e.customState),null!=e.extraInfo&&e.hasOwnProperty("extraInfo")&&(r.extraInfo=e.extraInfo),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.PlayerProp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.playerId="",e.prototype.customProp="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.playerId&&Object.hasOwnProperty.call(e,"playerId")&&t.uint32(10).string(e.playerId),null!=e.customProp&&Object.hasOwnProperty.call(e,"customProp")&&t.uint32(18).string(e.customProp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.PlayerProp;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.playerId=e.string();break;case 2:o.customProp=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.playerId&&e.hasOwnProperty("playerId")&&!$util.isString(e.playerId)?"playerId: string expected":null!=e.customProp&&e.hasOwnProperty("customProp")&&!$util.isString(e.customProp)?"customProp: string expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.PlayerProp)return e;var t=new $root.game.gobes.grpc.common.dto.PlayerProp;return null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.customProp&&(t.customProp=String(e.customProp)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.playerId="",r.customProp=""),null!=e.playerId&&e.hasOwnProperty("playerId")&&(r.playerId=e.playerId),null!=e.customProp&&e.hasOwnProperty("customProp")&&(r.customProp=e.customProp),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.QueryFrameResult=function(){function e(e){if(this.relayFrameInfos=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.relayFrameInfos=$util.emptyArray,e.prototype.playerId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.relayFrameInfos&&e.relayFrameInfos.length)for(var r=0;r<e.relayFrameInfos.length;++r)$root.game.gobes.grpc.common.dto.RelayFrameInfo.encode(e.relayFrameInfos[r],t.uint32(10).fork()).ldelim();return null!=e.playerId&&Object.hasOwnProperty.call(e,"playerId")&&t.uint32(18).string(e.playerId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.QueryFrameResult;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.relayFrameInfos&&o.relayFrameInfos.length||(o.relayFrameInfos=[]),o.relayFrameInfos.push($root.game.gobes.grpc.common.dto.RelayFrameInfo.decode(e,e.uint32()));break;case 2:o.playerId=e.string();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.relayFrameInfos&&e.hasOwnProperty("relayFrameInfos")){if(!Array.isArray(e.relayFrameInfos))return"relayFrameInfos: array expected";for(var t=0;t<e.relayFrameInfos.length;++t){var r=$root.game.gobes.grpc.common.dto.RelayFrameInfo.verify(e.relayFrameInfos[t]);if(r)return"relayFrameInfos."+r}}return null!=e.playerId&&e.hasOwnProperty("playerId")&&!$util.isString(e.playerId)?"playerId: string expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.QueryFrameResult)return e;var t=new $root.game.gobes.grpc.common.dto.QueryFrameResult;if(e.relayFrameInfos){if(!Array.isArray(e.relayFrameInfos))throw TypeError(".game.gobes.grpc.common.dto.QueryFrameResult.relayFrameInfos: array expected");t.relayFrameInfos=[];for(var r=0;r<e.relayFrameInfos.length;++r){if("object"!=typeof e.relayFrameInfos[r])throw TypeError(".game.gobes.grpc.common.dto.QueryFrameResult.relayFrameInfos: object expected");t.relayFrameInfos[r]=$root.game.gobes.grpc.common.dto.RelayFrameInfo.fromObject(e.relayFrameInfos[r])}}return null!=e.playerId&&(t.playerId=String(e.playerId)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.relayFrameInfos=[]),t.defaults&&(r.playerId=""),e.relayFrameInfos&&e.relayFrameInfos.length){r.relayFrameInfos=[];for(var o=0;o<e.relayFrameInfos.length;++o)r.relayFrameInfos[o]=$root.game.gobes.grpc.common.dto.RelayFrameInfo.toObject(e.relayFrameInfos[o],t)}return null!=e.playerId&&e.hasOwnProperty("playerId")&&(r.playerId=e.playerId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.QueryFrame=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.currentFrameId=0,e.prototype.size=0,e.prototype.mode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.currentFrameId&&Object.hasOwnProperty.call(e,"currentFrameId")&&t.uint32(8).int32(e.currentFrameId),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(16).int32(e.size),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(24).int32(e.mode),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.QueryFrame;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.currentFrameId=e.int32();break;case 2:o.size=e.int32();break;case 3:o.mode=e.int32();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.currentFrameId&&e.hasOwnProperty("currentFrameId")&&!$util.isInteger(e.currentFrameId)?"currentFrameId: integer expected":null!=e.size&&e.hasOwnProperty("size")&&!$util.isInteger(e.size)?"size: integer expected":null!=e.mode&&e.hasOwnProperty("mode")&&!$util.isInteger(e.mode)?"mode: integer expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.QueryFrame)return e;var t=new $root.game.gobes.grpc.common.dto.QueryFrame;return null!=e.currentFrameId&&(t.currentFrameId=0|e.currentFrameId),null!=e.size&&(t.size=0|e.size),null!=e.mode&&(t.mode=0|e.mode),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.currentFrameId=0,r.size=0,r.mode=0),null!=e.currentFrameId&&e.hasOwnProperty("currentFrameId")&&(r.currentFrameId=e.currentFrameId),null!=e.size&&e.hasOwnProperty("size")&&(r.size=e.size),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.RelayFrameInfo=function(){function e(e){if(this.frameInfo=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.currentRoomFrameId=0,e.prototype.frameInfo=$util.emptyArray,e.prototype.ext=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.currentRoomFrameId&&Object.hasOwnProperty.call(e,"currentRoomFrameId")&&t.uint32(8).int32(e.currentRoomFrameId),null!=e.frameInfo&&e.frameInfo.length)for(var r=0;r<e.frameInfo.length;++r)$root.game.gobes.grpc.common.dto.FrameInfo.encode(e.frameInfo[r],t.uint32(18).fork()).ldelim();return null!=e.ext&&Object.hasOwnProperty.call(e,"ext")&&$root.game.gobes.grpc.common.dto.FrameExtInfo.encode(e.ext,t.uint32(26).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.RelayFrameInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.currentRoomFrameId=e.int32();break;case 2:o.frameInfo&&o.frameInfo.length||(o.frameInfo=[]),o.frameInfo.push($root.game.gobes.grpc.common.dto.FrameInfo.decode(e,e.uint32()));break;case 3:o.ext=$root.game.gobes.grpc.common.dto.FrameExtInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.currentRoomFrameId&&e.hasOwnProperty("currentRoomFrameId")&&!$util.isInteger(e.currentRoomFrameId))return"currentRoomFrameId: integer expected";if(null!=e.frameInfo&&e.hasOwnProperty("frameInfo")){if(!Array.isArray(e.frameInfo))return"frameInfo: array expected";for(var t=0;t<e.frameInfo.length;++t)if(r=$root.game.gobes.grpc.common.dto.FrameInfo.verify(e.frameInfo[t]))return"frameInfo."+r}var r;return null!=e.ext&&e.hasOwnProperty("ext")&&(r=$root.game.gobes.grpc.common.dto.FrameExtInfo.verify(e.ext))?"ext."+r:null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.RelayFrameInfo)return e;var t=new $root.game.gobes.grpc.common.dto.RelayFrameInfo;if(null!=e.currentRoomFrameId&&(t.currentRoomFrameId=0|e.currentRoomFrameId),e.frameInfo){if(!Array.isArray(e.frameInfo))throw TypeError(".game.gobes.grpc.common.dto.RelayFrameInfo.frameInfo: array expected");t.frameInfo=[];for(var r=0;r<e.frameInfo.length;++r){if("object"!=typeof e.frameInfo[r])throw TypeError(".game.gobes.grpc.common.dto.RelayFrameInfo.frameInfo: object expected");t.frameInfo[r]=$root.game.gobes.grpc.common.dto.FrameInfo.fromObject(e.frameInfo[r])}}if(null!=e.ext){if("object"!=typeof e.ext)throw TypeError(".game.gobes.grpc.common.dto.RelayFrameInfo.ext: object expected");t.ext=$root.game.gobes.grpc.common.dto.FrameExtInfo.fromObject(e.ext)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.frameInfo=[]),t.defaults&&(r.currentRoomFrameId=0,r.ext=null),null!=e.currentRoomFrameId&&e.hasOwnProperty("currentRoomFrameId")&&(r.currentRoomFrameId=e.currentRoomFrameId),e.frameInfo&&e.frameInfo.length){r.frameInfo=[];for(var o=0;o<e.frameInfo.length;++o)r.frameInfo[o]=$root.game.gobes.grpc.common.dto.FrameInfo.toObject(e.frameInfo[o],t)}return null!=e.ext&&e.hasOwnProperty("ext")&&(r.ext=$root.game.gobes.grpc.common.dto.FrameExtInfo.toObject(e.ext,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.RoomInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.roomId="",e.prototype.roomName="",e.prototype.roomOwner="",e.prototype.customProp="",e.prototype.isPrivate=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.roomId&&Object.hasOwnProperty.call(e,"roomId")&&t.uint32(10).string(e.roomId),null!=e.roomName&&Object.hasOwnProperty.call(e,"roomName")&&t.uint32(18).string(e.roomName),null!=e.roomOwner&&Object.hasOwnProperty.call(e,"roomOwner")&&t.uint32(26).string(e.roomOwner),null!=e.customProp&&Object.hasOwnProperty.call(e,"customProp")&&t.uint32(34).string(e.customProp),null!=e.isPrivate&&Object.hasOwnProperty.call(e,"isPrivate")&&t.uint32(40).bool(e.isPrivate),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.RoomInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.roomId=e.string();break;case 2:o.roomName=e.string();break;case 3:o.roomOwner=e.string();break;case 4:o.customProp=e.string();break;case 5:o.isPrivate=e.bool();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.roomId&&e.hasOwnProperty("roomId")&&!$util.isString(e.roomId)?"roomId: string expected":null!=e.roomName&&e.hasOwnProperty("roomName")&&!$util.isString(e.roomName)?"roomName: string expected":null!=e.roomOwner&&e.hasOwnProperty("roomOwner")&&!$util.isString(e.roomOwner)?"roomOwner: string expected":null!=e.customProp&&e.hasOwnProperty("customProp")&&!$util.isString(e.customProp)?"customProp: string expected":null!=e.isPrivate&&e.hasOwnProperty("isPrivate")&&"boolean"!=typeof e.isPrivate?"isPrivate: boolean expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.RoomInfo)return e;var t=new $root.game.gobes.grpc.common.dto.RoomInfo;return null!=e.roomId&&(t.roomId=String(e.roomId)),null!=e.roomName&&(t.roomName=String(e.roomName)),null!=e.roomOwner&&(t.roomOwner=String(e.roomOwner)),null!=e.customProp&&(t.customProp=String(e.customProp)),null!=e.isPrivate&&(t.isPrivate=Boolean(e.isPrivate)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.roomId="",r.roomName="",r.roomOwner="",r.customProp="",r.isPrivate=!1),null!=e.roomId&&e.hasOwnProperty("roomId")&&(r.roomId=e.roomId),null!=e.roomName&&e.hasOwnProperty("roomName")&&(r.roomName=e.roomName),null!=e.roomOwner&&e.hasOwnProperty("roomOwner")&&(r.roomOwner=e.roomOwner),null!=e.customProp&&e.hasOwnProperty("customProp")&&(r.customProp=e.customProp),null!=e.isPrivate&&e.hasOwnProperty("isPrivate")&&(r.isPrivate=e.isPrivate),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e.ServerMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.code=0,e.prototype.seq="",e.prototype.timestamp=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.msg=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(18).string(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(34).bytes(e.msg),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new $root.game.gobes.grpc.common.dto.ServerMessage;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.int32();break;case 2:o.seq=e.string();break;case 3:o.timestamp=e.int64();break;case 4:o.msg=e.bytes();break;default:e.skipType(7&n)}}return o},e.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!$util.isInteger(e.code)?"code: integer expected":null!=e.seq&&e.hasOwnProperty("seq")&&!$util.isString(e.seq)?"seq: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!($util.isInteger(e.timestamp)||e.timestamp&&$util.isInteger(e.timestamp.low)&&$util.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null!=e.msg&&e.hasOwnProperty("msg")&&!(e.msg&&"number"==typeof e.msg.length||$util.isString(e.msg))?"msg: buffer expected":null},e.fromObject=function(e){if(e instanceof $root.game.gobes.grpc.common.dto.ServerMessage)return e;var t=new $root.game.gobes.grpc.common.dto.ServerMessage;return null!=e.code&&(t.code=0|e.code),null!=e.seq&&(t.seq=String(e.seq)),null!=e.timestamp&&($util.Long?(t.timestamp=$util.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.msg&&("string"==typeof e.msg?$util.base64.decode(e.msg,t.msg=$util.newBuffer($util.base64.length(e.msg)),0):e.msg.length&&(t.msg=e.msg)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.code=0,r.seq="",$util.Long){var o=new $util.Long(0,0,!1);r.timestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.timestamp=t.longs===String?"0":0;t.bytes===String?r.msg="":(r.msg=[],t.bytes!==Array&&(r.msg=$util.newBuffer(r.msg)))}return null!=e.code&&e.hasOwnProperty("code")&&(r.code=e.code),null!=e.seq&&e.hasOwnProperty("seq")&&(r.seq=e.seq),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?r.timestamp=t.longs===String?String(e.timestamp):e.timestamp:r.timestamp=t.longs===String?$util.Long.prototype.toString.call(e.timestamp):t.longs===Number?new $util.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.msg&&e.hasOwnProperty("msg")&&(r.msg=t.bytes===String?$util.base64.encode(e.msg,0,e.msg.length):t.bytes===Array?Array.prototype.slice.call(e.msg):e.msg),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),e}(),common.contant=((contant={}).CodeType=(valuesById={},(values=Object.create(valuesById))[valuesById[0]="LOGIN"]=0,values[valuesById[1]="LOGIN_ACK"]=1,values[valuesById[2]="HEARTBEAT"]=2,values[valuesById[3]="HEARTBEAT_ACK"]=3,values[valuesById[4]="CLIENT_FRAME_DATA"]=4,values[valuesById[5]="CLIENT_FRAME_DATA_ACK"]=5,values[valuesById[6]="QUERY_FRAME_DATA"]=6,values[valuesById[7]="QUERY_FRAME_DATA_ACK"]=7,values[valuesById[8]="START_RELAY_NOTIFY"]=8,values[valuesById[9]="STOP_RELAY_NOTIFY"]=9,values[valuesById[10]="SERVER_RELAY_FRAME_NOTIFY"]=10,values[valuesById[11]="QUERY_FRAME_DATA_RESULT_NOTIFY"]=11,values[valuesById[12]="JOIN_ROOM_NOTIFY"]=12,values[valuesById[13]="LEFT_ROOM_NOTIFY"]=13,values[valuesById[14]="SETUP_CONN_NOTIFY"]=14,values[valuesById[15]="DISCONNECT_NOTIFY"]=15,values[valuesById[16]="DISBAND_ROOM_NOTIFY"]=16,values[valuesById[17]="QUERY_FRAME_DATA_RESULT_NOTIFY_EX"]=17,values[valuesById[18]="NOTIFY_PLAYER_STATUS"]=18,values[valuesById[19]="NOTIFY_PLAYER_PROP"]=19,values[valuesById[20]="NOTIFY_ROOM_PROP"]=20,values[valuesById[21]="NOTIFY_SUB_RESULT"]=21,values[valuesById[22]="IM_DATA"]=22,values[valuesById[23]="IM_DATA_ACK"]=23,values),contant.ConnMode=function(){var e={},t=Object.create(e);return t[e[0]="WEBSOCKET"]=0,t[e[1]="RTSA"]=1,t}(),contant.NetMode=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOW"]=0,t[e[1]="TCP"]=1,t[e[2]="UDP"]=2,t}(),contant.PlayerStatus=function(){var e={},t=Object.create(e);return t[e[0]="DISCONNECT"]=0,t[e[1]="CONNECT"]=1,t}(),contant),common.constant=((constant={}).InstantMessageType=function(){var e={},t=Object.create(e);return t[e[0]="ROOM"]=0,t[e[1]="ROOM_EXCEPT_SENDER"]=1,t[e[2]="PLAYERS"]=2,t}(),constant),common),grpc),gobes),game);var compiled=$root;const{dto:dto}=compiled.game.gobes.grpc.common,{ServerMessage:ServerMessage,ClientMessage:ClientMessage,AckMessage:AckMessage,ClientFrame:ClientFrame,QueryFrame:QueryFrame,RelayFrameInfo:RelayFrameInfo,QueryFrameResult:QueryFrameResult,InstantMessage:InstantMessage}=dto,PlayerInfoFrame=dto.PlayerInfo,PlayerPropFrame=dto.PlayerProp,RoomInfoFrame=dto.RoomInfo;class Room extends Base{constructor(e,t){super(),this.onConnect=createSignal(),this.onJoin=createSignal(),this.onLeave=createSignal(),this.onDismiss=createSignal(),this.onDisconnect=createSignal(),this.onStartFrameSync=createSignal(),this.onStopFrameSync=createSignal(),this.onRecvFrame=createSignal(),this.onRequestFrameError=createSignal(),this.onUpdateCustomStatus=createSignal(),this.onUpdateCustomProperties=createSignal(),this.onRoomPropertiesChange=createSignal(),this.onRecvFromClient=createSignal(),this.onSendToClientFailed=createSignal(),this.connection=null,this.frameId=0,this.frameRequestMaxSize=1e3,this.frameRequesting=!1,this.frameRequestSize=0,this.frameRequestTimes=0,this.frameRequestList=[],this.autoFrameRequesting=!1,this.autoRequestFrameFailed=!1,this.autoFrameRequestCacheList=[],this.endpoint="",this._isSyncing=!1,this.initiativeLeaveRoomFlag=!1,this.config=t,this._isSyncing=1==t.roomStatus,this._client=e,this._player=new Player}get id(){return this.config.roomId}get roomType(){return this.config.roomType}get roomName(){return this.config.roomName}get roomCode(){return this.config.roomCode}get customRoomProperties(){return this.config.customRoomProperties}get ownerId(){return this.config.ownerId}get maxPlayers(){return this.config.maxPlayers}get players(){return this.config.players}get router(){return this.config.router}get isPrivate(){return this.config.isPrivate}get createTime(){return this.config.createTime}get player(){return this._player}get isSyncing(){return this._isSyncing}connect(e,t){this.connection=new Connection,this.connection.events.onopen=e=>{Logger.info({eventType:"WebSocket Open",event:e})},this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=e=>{2!==this.state&&3!==this.state||(this.onDisconnect.emit({playerId:this.playerId},e),Logger.error({eventType:"WebSocket Close",event:e})),this.setState(1),this.setRoomId(""),this.stopWSHeartbeat()},this.endpoint=this.buildEndpoint(e,t),this.connection.connect(this.endpoint)}sendFrame(e){var t;Logger.debug({eventType:"sendFrame_start",playerId:this.playerId,currentFrameId:this.frameId}),this.checkInSync();const r=ClientFrame.create({currentFrameId:this.frameId,timestamp:Date.now(),data:"string"==typeof e?[e]:e}),o=ClientMessage.create({timestamp:Date.now(),seq:this.sendFrame.name,code:4,msg:ClientFrame.encode(r).finish()});null===(t=this.connection)||void 0===t||t.send(ClientMessage.encode(o).finish()),Logger.debug({eventType:"sendFrame_end",playerId:this.playerId})}requestFrame(e,t){var r;Logger.info({eventType:"requestFrame_start",playerId:this.playerId,beginFrameId:e,size:t}),this.checkInSync(),this.checkNotInRequesting(),this.frameRequesting=!0,this.frameRequestSize=t;const o=Math.ceil(t/this.frameRequestMaxSize);let n=0;for(;n<o;){const o=e+this.frameRequestMaxSize*n,i=Math.min(this.frameRequestMaxSize,t-n*this.frameRequestMaxSize),s=QueryFrame.create({mode:1,currentFrameId:o,size:i}),a=ClientMessage.create({timestamp:Date.now(),seq:this.requestFrame.name,code:6,msg:QueryFrame.encode(s).finish()});null===(r=this.connection)||void 0===r||r.send(ClientMessage.encode(a).finish()),++n,Logger.debug({eventType:"requestFrame_times_"+n,playerId:this.playerId,beginFrameId:o,size:i})}}resetRoomFrameId(e){if(e<0)throw new GOBEError(10003);this.frameId=Math.floor(e),this.clearRequestFrame()}removeAllListeners(){[this.onJoin,this.onLeave,this.onDismiss,this.onDisconnect,this.onStartFrameSync,this.onStopFrameSync,this.onRecvFrame,this.onUpdateCustomStatus,this.onUpdateCustomProperties,this.onRoomPropertiesChange,this.onRecvFromClient,this.onSendToClientFailed,this.onRequestFrameError].forEach((e=>e.clear()))}reconnect(e){return __awaiter(this,void 0,void 0,(function*(){if(Logger.info({eventType:"reconnect_start",playerId:this.playerId}),yield this._client.init(),!this.lastRoomId)throw new GOBEError(90002);const{roomInfo:t,ticket:r}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.room.join",roomId:this.config.roomId},e)),o=t.players.find((e=>e.playerId===this.playerId));this.player.customStatus=null==o?void 0:o.customPlayerStatus,this.player.customProperties=null==o?void 0:o.customPlayerProperties,this.config=t,this.setRoomId(t.roomId),yield heartbeat.send(4),this.connect(t.router.routerAddr,r),Logger.info({eventType:"reconnect_end",playerId:this.playerId})}))}startFrameSync(){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"startFrameSync_start",roomId:this.id}),this.checkNotInSync(),yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.frame.sync.begin",roomId:this.id}),yield heartbeat.send(6),Logger.info({eventType:"startFrameSync_end",roomId:this.id})}))}stopFrameSync(){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"stopFrameSync_start",roomId:this.id}),this.checkInSync(),yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.frame.sync.stop",roomId:this.id}),yield heartbeat.send(7),Logger.info({eventType:"stopFrameSync_end",roomId:this.id})}))}update(){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"update_start",roomId:this.id});const{roomInfo:e}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.room.detail",roomId:this.id});return Object.assign(this.config,e),Logger.info({eventType:"update_end",roomId:this.id}),this}))}updateRoomProperties(e){var t,r,o,n;return __awaiter(this,void 0,void 0,(function*(){return Logger.info({eventType:"updateRoomProperties_start",roomId:this.id}),e.roomName=null!==(t=e.roomName)&&void 0!==t?t:this.config.roomName,e.ownerId=null!==(r=e.ownerId)&&void 0!==r?r:this.config.ownerId,e.isPrivate=null!==(o=e.isPrivate)&&void 0!==o?o:this.config.isPrivate,e.customRoomProperties=null!==(n=e.customRoomProperties)&&void 0!==n?n:this.config.customRoomProperties,yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.room.update",roomId:this.config.roomId},e)),Logger.info({eventType:"updateRoomProperties_end",roomId:this.id}),this}))}leave(){var e;return __awaiter(this,void 0,void 0,(function*(){this.initiativeLeaveRoomFlag=!0;try{yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.room.leave",roomId:this.id})}catch(e){throw this.initiativeLeaveRoomFlag=!1,e}this.initiativeLeaveRoomFlag=!1,yield heartbeat.send(5),null===(e=this.connection)||void 0===e||e.close(),this.setState(1)}))}dismiss(){var e;return __awaiter(this,void 0,void 0,(function*(){this.initiativeLeaveRoomFlag=!0;try{yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.room.dismiss",roomId:this.id})}catch(e){throw this.initiativeLeaveRoomFlag=!1,e}this.initiativeLeaveRoomFlag=!1,yield heartbeat.send(5),null===(e=this.connection)||void 0===e||e.close(),this.setState(1)}))}removePlayer(e){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"removePlayer_start",roomId:this.id,removePlayerId:e}),this.checkNotInSync(),yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.room.remove",roomId:this.id,playerId:e}),Logger.info({eventType:"removePlayer_end",roomId:this.id,removePlayerId:e})}))}sendToClient(e){var t;return __awaiter(this,void 0,void 0,(function*(){const r=InstantMessage.create({imType:e.type,dstPlayers:e.recvPlayerIdList,srcPlayer:this.playerId,msg:e.msg}),o=ClientMessage.create({timestamp:Date.now(),seq:this.sendToClient.name,code:22,msg:InstantMessage.encode(r).finish()});null===(t=this.connection)||void 0===t||t.send(ClientMessage.encode(o).finish()),Logger.info({eventType:"sendToClient",roomId:this.id,sendToClientInfo:e})}))}onMessageCallback(e){return __awaiter(this,void 0,void 0,(function*(){const t=ServerMessage.decode(new Uint8Array(e.data)),{code:r}=t.toJSON(),{msg:o}=t;switch(r){case 14:{const e=PlayerInfoFrame.decode(o).toJSON();this.connectedMsgACKHandle(e);break}case 8:this.setState(3),this.frameId=0,this._isSyncing=!0,this.config.roomStatus=1,this.onStartFrameSync.emit(),Logger.info({eventType:"wsMsg frameSyncStarted",roomId:this.id});break;case 10:{const e=RelayFrameInfo.decode(o).toJSON(),t={isReplay:!1,time:Date.now()};this.broadcastFramedata(Object.assign(e,t));break}case 9:this.setState(2),this._isSyncing=!1,this.config.roomStatus=0,this.onStopFrameSync.emit(),Logger.info({eventType:"wsMsg frameSyncStopped",roomId:this.id});break;case 7:{const e=AckMessage.decode(o).toJSON();this.queryFrameDataAckHandle(e);break}case 17:{const e=QueryFrameResult.decode(o).toJSON().relayFrameInfos,t=[];this.frameRequestTimes++,null==e||e.forEach((e=>{t.push({currentRoomFrameId:e.currentRoomFrameId,frameInfo:e.frameInfo,ext:e.ext,isReplay:!0,time:Date.now()})})),this.handleFramedataResult(t);break}case 12:{const e=PlayerInfoFrame.decode(o).toJSON();this.joinRoomMsgHandle(e);break}case 13:{const e=PlayerInfoFrame.decode(o).toJSON();this.leaveRoomMsgHandle(e);break}case 15:{const e=PlayerInfoFrame.decode(o).toJSON();this.disconnectMsgHandle(e);break}case 16:yield this.dismissRoomMsgHandle();break;case 18:{const e=PlayerInfoFrame.decode(o).toJSON();this.updateCustomStatusHandle(e);break}case 19:{const e=PlayerPropFrame.decode(o).toJSON();for(let t=0;t<this.config.players.length;t++)if(this.config.players[t].playerId===e.playerId){this.config.players[t].customPlayerProperties=e.customProp;break}Logger.info({eventType:"wsMsg updateCustomProperties",playerId:e.playerId,roomId:this.id}),this.onUpdateCustomProperties.emit({playerId:e.playerId,customProperties:e.customProp});break}case 20:{const e=RoomInfoFrame.decode(o).toJSON();this.config.roomName=e.roomName,this.config.ownerId=e.roomOwner,this.config.customRoomProperties=e.customProp,this.config.isPrivate=e.isPrivate?1:0,Logger.info({eventType:"wsMsg updateRoomProperties",roomProperties:e.customProp,roomId:this.id}),this.onRoomPropertiesChange.emit(this.config);break}case 22:{const e=InstantMessage.decode(o).toJSON(),t={roomId:this.id,sendPlayerId:e.srcPlayer,msg:e.msg};this.onRecvFromClient.emit(t);break}case 23:{const e=AckMessage.decode(o).toJSON();this.instantMsgACKHandle(e);break}}}))}clearRequestFrame(){this.frameRequesting=!1,this.frameRequestSize=0,this.frameRequestList=[],this.autoFrameRequesting=!1,this.autoFrameRequestCacheList=[],this.frameRequestTimes=0,this.autoRequestFrameFailed=!1}startWSHeartbeat(){this.stopWSHeartbeat();const e=Room.wsHeartBeatCycle;this.wsHeartbeatTimer=setInterval((()=>this.doWSHeartbeat()),e)}doWSHeartbeat(){var e;const t=ClientMessage.create({code:2,seq:this.doWSHeartbeat.name,timestamp:Date.now()});this.connection&&(null===(e=this.connection)||void 0===e?void 0:e.wsIsOpen())&&this.connection.send(ClientMessage.encode(t).finish()),Logger.debug({eventType:"ws heartBeat",roomId:this.id})}stopWSHeartbeat(){this.wsHeartbeatTimer&&(clearInterval(this.wsHeartbeatTimer),Logger.debug({eventType:"ws heartBeat stopped",roomId:this.id}))}buildEndpoint(e,t){return`wss://${e}/hw-game-obe/endpoint?sdkVersion=10108300&ticket=${t}`}checkInSync(){if(!this._isSyncing)throw new GOBEError(90005);return!0}checkNotInSync(){if(this._isSyncing)throw new GOBEError(90006);return!0}checkNotInRequesting(){if(this.frameRequesting)throw new GOBEError(90010);return!0}broadcastFramedata(e){this.autoRequestFrameFailed||(this.autoFrameRequesting?this.autoFrameRequestCacheList.push(e):e.currentRoomFrameId-this.frameId>1&&1===Room.autoFrame?(this.autoFrameRequesting=!0,this.autoFrameRequestCacheList.push(e),this.requestFrame(this.frameId+1,e.currentRoomFrameId-this.frameId-1)):e.currentRoomFrameId>this.frameId&&(this.frameId=e.currentRoomFrameId,Logger.debug({eventType:"broadcastFrame",frameId:this.frameId}),this.onRecvFrame.emit(e)))}handleFramedataResult(e){if(e&&this.frameRequestList.push(...e),this.frameRequestTimes===Math.ceil(this.frameRequestSize/this.frameRequestMaxSize))if(this.frameRequestList.length===this.frameRequestSize){const e=this.autoFrameRequestCacheList,t=this.frameRequestList;t.sort(((e,t)=>e.currentRoomFrameId-t.currentRoomFrameId)),this.autoFrameRequesting&&1===Room.autoFrame?(this.clearRequestFrame(),this.frameId=e[e.length-1].currentRoomFrameId,Logger.debug({eventType:"requestFrame_res",frameStartId:t[0].currentRoomFrameId,frameEndId:t[t.length-1].currentRoomFrameId,autoFrameStartId:e[0].currentRoomFrameId,autoFrameEndId:this.frameId,totalFrameCount:t.length+e.length}),this.onRecvFrame.emit([...t,...e])):(this.clearRequestFrame(),Logger.debug({eventType:"requestFrame_res",frameStartId:t[0].currentRoomFrameId,frameEndId:t[t.length-1].currentRoomFrameId,totalFrameCount:t.length}),this.onRecvFrame.emit(t))}else this.autoRequestFrameFailed=!0,this.onRequestFrameError.emit(new GOBEError(10002,"auto request frame failed, please reset frameId."))}connectedMsgACKHandle(e){e.playerId===this.playerId&&(this.clearRequestFrame(),this.startWSHeartbeat(),this.setState(1===this.config.roomStatus?3:2),this.setRoomId(this.id)),this.onConnect.emit({playerId:e.playerId}),Logger.info({eventType:"wsMsg connected",playerId:e.playerId,roomId:this.id})}leaveRoomMsgHandle(e){var t;if(Logger.info({eventType:"wsMsg leaveRoom",playerId:e.playerId,roomId:this.id}),e.playerId!==this.playerId||this.initiativeLeaveRoomFlag){if(e.playerId!==this.playerId){const t=this.config.players.findIndex((t=>t.playerId===e.playerId));-1!==t&&this.config.players.splice(t,1)}}else this.setLastRoomId(""),null===(t=this.connection)||void 0===t||t.close();this.onLeave.emit({playerId:e.playerId})}joinRoomMsgHandle(e){let t=null;e.extraInfo&&(t=JSON.parse(e.extraInfo));const r=this.config.players.findIndex((t=>t.playerId===e.playerId));-1===r?this.config.players.push(t):this.config.players[r]=t,Logger.info({eventType:"wsMsg joinRoom",playerId:e.playerId,roomId:this.id}),this.onJoin.emit({playerId:e.playerId})}disconnectMsgHandle(e){const t=this.config.players.findIndex((t=>t.playerId===e.playerId));-1!==t&&(this.config.players[t].status=0),Logger.info({eventType:"wsMsg disconnected",playerId:e.playerId,roomId:this.id}),this.onDisconnect.emit({playerId:e.playerId})}dismissRoomMsgHandle(){var e;return __awaiter(this,void 0,void 0,(function*(){this.initiativeLeaveRoomFlag||(yield heartbeat.send(5),null===(e=this.connection)||void 0===e||e.close(),this.setLastRoomId(""),this.setRoomId(""),this.setState(1),Logger.info({eventType:"wsMsg dismissRoom",roomId:this.id}),this.onDismiss.emit())}))}updateCustomStatusHandle(e){var t;const r=null!==(t=e.customState)&&void 0!==t?t:0;this.onUpdateCustomStatus.emit({playerId:e.playerId,customStatus:r});for(let t=0;t<this.config.players.length;t++)if(this.config.players[t].playerId===e.playerId){this.config.players[t].customPlayerStatus=r;break}Logger.info({eventType:"wsMsg updateCustomStatus",playerId:e.playerId,roomId:this.id})}instantMsgACKHandle(e){e.rtnCode&&0!==e.rtnCode&&this.onSendToClientFailed.emit(new GOBEError(e.rtnCode,e.msg))}queryFrameDataAckHandle(e){e.rtnCode&&0!==e.rtnCode&&(this.clearRequestFrame(),this.onRequestFrameError.emit(new GOBEError(e.rtnCode,e.msg)))}}Room.wsHeartBeatCycle=5e3,Room.autoFrame=0;class Group extends Base{constructor(e,t){super(),this.onJoin=createSignal(),this.onLeave=createSignal(),this.onDismiss=createSignal(),this.onUpdate=createSignal(),this.onMatchStart=createSignal(),this.config=t,this._client=e,this._player=new Player}get id(){return this.config.groupId}get groupName(){return this.config.groupName}get maxPlayers(){return this.config.maxPlayers}get ownerId(){return this.config.ownerId}get customGroupProperties(){return this.config.customGroupProperties}get isLock(){return this.config.isLock}get isPersistent(){return this.config.isPersistent}get players(){return this.config.players}get player(){return this._player}query(){return __awaiter(this,void 0,void 0,(function*(){const{groupInfo:e}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.group.detail",groupId:this.id});return Object.assign(this.config,e),this}))}leave(){return __awaiter(this,void 0,void 0,(function*(){yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.group.leave",groupId:this.id})}))}dismiss(){return __awaiter(this,void 0,void 0,(function*(){yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.group.dismiss",groupId:this.id})}))}updateGroup(e){return __awaiter(this,void 0,void 0,(function*(){this.checkUpdatePermission(),yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.group.change",groupId:this.id},e))}))}removePlayer(e){return __awaiter(this,void 0,void 0,(function*(){yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.group.player.remove",groupId:this.id,playerId:e})}))}checkUpdatePermission(){if(this.playerId!=this.ownerId)throw new GOBEError(80003,"You are no permission to update!");return!0}onServerEventChange(e){return __awaiter(this,void 0,void 0,(function*(){switch(e.eventType){case 1:this.onMatchStart.emit(e);break;case 6:this.onJoin.emit(e);break;case 7:this.onLeave.emit(e);break;case 8:this._client.removeGroup(),this.onDismiss.emit(e);break;case 9:this.onUpdate.emit(e)}}))}removeAllListeners(){[this.onJoin,this.onLeave,this.onDismiss,this.onUpdate,this.onMatchStart].forEach((e=>e.clear()))}}class Client extends Base{constructor(e){var t,r;super(),this._room=null,this._group=null,this._pollInterval=2e3,this._isMatching=!1,this._loginTimestamp=0,this.onMatch=createSignal(),this.setAppId(e.appId),this.setOpenId(e.openId),Platform.platform=null!==(t=e.platform)&&void 0!==t?t:exports.PlatformType.WEB,Platform.cerPath=null!==(r=e.cerPath)&&void 0!==r?r:"",this._auth=new Auth(e.clientId,e.clientSecret,e.createSignature,e.accessToken)}get room(){return this._room}get group(){return this._group}get loginTimestamp(){return this._loginTimestamp}destroy(){var e,t;return __awaiter(this,void 0,void 0,(function*(){heartbeat.stopHttpHeartBeat(),null===(e=this._room)||void 0===e||e.stopWSHeartbeat(),null===(t=this._room)||void 0===t||t.removeAllListeners(),this._room=null,this._group=null,this._isMatching=!1,this._loginTimestamp=0,this.setRoomId(""),this.setGroupId(""),this.setLastRoomId(""),this.setPlayerId(""),this.setServiceToken(""),this.setState(0)}))}init(){return __awaiter(this,void 0,void 0,(function*(){const{gameInfo:e,timeStamp:t}=yield this._auth.login();return this._loginTimestamp=t,e.httpTimeout&&(Request.timeout=e.httpTimeout),e.pollInterval&&(this._pollInterval=e.pollInterval),e.logLevel&&(Logger.level=e.logLevel),e.httpHeartBeatCycle&&(Heartbeat.httpHeartBeatCycle=e.httpHeartBeatCycle),e.wsHeartBeatCycle&&(Room.wsHeartBeatCycle=e.wsHeartBeatCycle),e.autoFrame&&(Room.autoFrame=e.autoFrame),heartbeat.startHttpHeartBeat(),Logger.info({eventType:"init_gobe",playerId:this.playerId}),this}))}createRoom(e,t){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"createRoom_start",playerId:this.playerId}),this.checkCreateRoomConfig(e),this.checkInit(),this.checkCreateOrJoin();const{roomInfo:r,ticket:o}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign(Object.assign({method:"client.gobe.room.create",isPrivate:0},e),t)),n=r.players.find((e=>e.playerId===this.playerId));return this.setRoomId(r.roomId),this.setLastRoomId(r.roomId),yield heartbeat.send(4),this._room=new Room(this,r),this._room.player.customStatus=null==n?void 0:n.customPlayerStatus,this._room.player.customProperties=null==n?void 0:n.customPlayerProperties,this._room.connect(r.router.routerAddr,o),Logger.info({eventType:"createRoom_end",playerId:this.playerId,roomId:r.roomId}),this._room}))}createGroup(e,t){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"createGroup_start",playerId:this.playerId}),this.checkCreateGroupConfig(e),this.checkInit(),this.checkGroupCreateOrJoin();const{groupInfo:r}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign(Object.assign({method:"client.gobe.group.create"},e),t)),o=r.players.find((e=>e.playerId===this.playerId));return this.setGroupId(r.groupId),this._group=new Group(this,r),this._group.player.customStatus=null==o?void 0:o.customPlayerStatus,this._group.player.customProperties=null==o?void 0:o.customPlayerProperties,Logger.info({eventType:"createGroup_end",playerId:this.playerId,groupId:r.groupId}),this._group}))}joinRoom(e,t){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"joinRoom_start",playerId:this.playerId,roomIdentity:e}),this.checkInit(),this.checkCreateOrJoin();const r=this.checkJoinRoomConfig(e),{roomInfo:o,ticket:n}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign(Object.assign({method:"client.gobe.room.join"},r),t)),i=o.players.find((e=>e.playerId===this.playerId));return this.setRoomId(o.roomId),this.setLastRoomId(o.roomId),yield heartbeat.send(4),this._room=new Room(this,o),this._room.player.customStatus=null==i?void 0:i.customPlayerStatus,this._room.player.customProperties=null==i?void 0:i.customPlayerProperties,this._room.connect(o.router.routerAddr,n),Logger.info({eventType:"joinRoom_end",playerId:this.playerId,roomId:o.roomId}),this._room}))}joinGroup(e,t){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"joinGroup_start",playerId:this.playerId,groupId:e}),this.checkInit(),this.checkGroupCreateOrJoin();const{groupInfo:r}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.group.join",groupId:e},t)),o=r.players.find((e=>e.playerId===this.playerId));return this.setGroupId(r.groupId),this._group=new Group(this,r),this._group.player.customStatus=null==o?void 0:o.customPlayerStatus,this._group.player.customProperties=null==o?void 0:o.customPlayerProperties,Logger.info({eventType:"joinGroup_end",playerId:this.playerId,groupId:this.groupId}),this._group}))}leaveRoom(){var e;return __awaiter(this,void 0,void 0,(function*(){if(Logger.info({eventType:"leaveRoom_start",playerId:this.playerId}),this.checkInit(),this.checkLeaveOrdismiss(),this._room){const e=this._room.id;yield this._room.leave(),Logger.info({eventType:"leaveRoom_end",playerId:this.playerId,roomId:e,leaveType:"byRoomId"})}else yield this.leave(),Logger.info({eventType:"leaveRoom_end",playerId:this.playerId,roomId:this.lastRoomId,leaveType:"byLastRoomId"});return null===(e=this._room)||void 0===e||e.removeAllListeners(),this._room=null,this.setLastRoomId(""),this}))}leave(){return __awaiter(this,void 0,void 0,(function*(){this.checkLastRoomId(),yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.room.leave",roomId:this.lastRoomId})}))}dismissRoom(){var e,t,r;return __awaiter(this,void 0,void 0,(function*(){return Logger.info({eventType:"dismissRoom_start",playerId:this.playerId,roomId:null===(e=this._room)||void 0===e?void 0:e.id}),this.checkInit(),this.checkLeaveOrdismiss(),yield null===(t=this._room)||void 0===t?void 0:t.dismiss(),null===(r=this._room)||void 0===r||r.removeAllListeners(),this._room=null,this.setLastRoomId(""),Logger.info({eventType:"dismissRoom_end",playerId:this.playerId}),this}))}leaveGroup(){var e,t,r;return __awaiter(this,void 0,void 0,(function*(){return Logger.info({eventType:"leaveGroup_start",playerId:this.playerId,groupId:null===(e=this._group)||void 0===e?void 0:e.id}),this.checkInit(),this.checkGroupLeaveOrdismiss(),yield null===(t=this._group)||void 0===t?void 0:t.leave(),null===(r=this._group)||void 0===r||r.removeAllListeners(),this.removeGroup(),Logger.info({eventType:"leaveGroup_end",playerId:this.playerId}),this}))}dismissGroup(){var e,t,r;return __awaiter(this,void 0,void 0,(function*(){return Logger.info({eventType:"dismissGroup_start",playerId:this.playerId,groupId:null===(e=this._group)||void 0===e?void 0:e.id}),this.checkInit(),this.checkGroupLeaveOrdismiss(),yield null===(t=this._group)||void 0===t?void 0:t.dismiss(),null===(r=this._group)||void 0===r||r.removeAllListeners(),this.removeGroup(),Logger.info({eventType:"dismissGroup_end",playerId:this.playerId}),this}))}removeGroup(){this._group=null}resetRoomFrameId(e){var t;return __awaiter(this,void 0,void 0,(function*(){if(this.checkInit(),!this._room)throw new GOBEError(102008);return null===(t=this._room)||void 0===t||t.resetRoomFrameId(e),this}))}getAvailableRooms(e){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"getAvailableRooms_start",playerId:this.playerId}),this.checkInit();const{rooms:t,count:r,offset:o,hasNext:n}=yield Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.room.list.query"},e));return Logger.info({eventType:"getAvailableRooms_end",playerId:this.playerId,count:r}),{rooms:t,count:r,offset:o,hasNext:n}}))}matchRoom(e,t){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"matchRoom_start",playerId:this.playerId}),this.checkInit(),this.checkCreateOrJoin(),this.checkMatching(),this._isMatching=!0;const r=this._pollInterval,o=Date.now(),n=()=>new Promise(((t,i)=>{Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.room.match"},e)).then((e=>{this._isMatching=!1,t(e.roomId)})).catch((e=>{104102==(null==e?void 0:e.code)?setTimeout((()=>{t(n())}),r):Date.now()-o>=3e5?(this._isMatching=!1,i(new GOBEError(104103))):(this._isMatching=!1,i(e))}))})),i=yield n();return Logger.info({eventType:"matchRoom_end",playerId:this.playerId,roomId:i}),this.joinRoom(i,t)}))}matchPlayer(e,t){return __awaiter(this,void 0,void 0,(function*(){return Logger.info({eventType:"matchPlayer_start",playerId:this.playerId}),this.checkInit(),this.checkCreateOrJoin(),this.checkMatching(),this._isMatching=!0,new Promise(((r,o)=>{Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.online.match"},e),void 0,!1).then((e=>{104202==e.rtnCode?(this.matchQuery(t),e.rtnCode=0,r(e)):(this._isMatching=!1,o(e))})).catch((e=>{this._isMatching=!1,o(e)})).finally((()=>{Logger.info({eventType:"matchPlayer_end",playerId:this.playerId})}))}))}))}matchGroup(e,t){var r;return __awaiter(this,void 0,void 0,(function*(){if(Logger.info({eventType:"matchGroup_start",playerId:this.playerId}),this.checkInit(),this.checkCreateOrJoin(),this.checkMatching(),this._isMatching=!0,(null===(r=this._group)||void 0===r?void 0:r.ownerId)==this.playerId){const t=yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.group.change",groupId:this.groupId,isLock:1}),{players:r}=t.groupInfo;if(r.length!=e.playerInfos.length)throw this._isMatching=!1,new GOBEError(90011);const o=r.map((e=>e.playerId)),n=new Set(o);for(const{playerId:t}of e.playerInfos)if(!n.has(t))throw this._isMatching=!1,new GOBEError(90011)}return new Promise(((r,o)=>{Request.post("/gamex-edge-service/v1/gameXClientApi",Object.assign({method:"client.gobe.group.match"},e),void 0,!1).then((e=>{104202==e.rtnCode?(this.matchQuery(t),e.rtnCode=0,r(e)):(this._isMatching=!1,o(e))})).catch((e=>{this._isMatching=!1,o(e)})).finally((()=>{Logger.info({eventType:"matchGroup_end",playerId:this.playerId})}))}))}))}matchQuery(e){Logger.info({eventType:"onMatch_start",playerId:this.playerId}),this.checkInit(),this.checkCreateOrJoin(),this._isMatching=!0;const t=this._pollInterval,r=()=>{Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.match.query"},void 0,!1).then((o=>{0===o.rtnCode?o.roomId?this.joinRoom(o.roomId,e).then((e=>{this.onMatch.emit({rtnCode:0,room:e})})).catch((e=>{this.onMatch.emit({rtnCode:e.code,msg:e.msg})})).finally((()=>{this._isMatching=!1,Logger.info({eventType:"onMatch_end",playerId:this.playerId,roomId:o.roomId})})):(this._isMatching=!1,this.onMatch.emit({rtnCode:104208,msg:"roomId is null"}),Logger.info({eventType:"onMatch_end",playerId:this.playerId,roomId:o.roomId})):104202===o.rtnCode?setTimeout((()=>r()),t):(this._isMatching=!1,this.onMatch.emit(o),Logger.info({eventType:"onMatch_end",playerId:this.playerId,roomId:o.roomId}))})).catch((e=>{this._isMatching=!1,this.onMatch.emit(Object.assign({rtnCode:90012,msg:`http request error ${e.status}`},e)),Logger.info({eventType:"onMatch_end",playerId:this.playerId})}))};r()}cancelMatch(){return __awaiter(this,void 0,void 0,(function*(){Logger.info({eventType:"cancelMatch_start",playerId:this.playerId}),this.checkInit();const e=yield Request.post("/gamex-edge-service/v1/gameXClientApi",{method:"client.gobe.match.cancel"});return Logger.info({eventType:"cancelMatch_end",playerId:this.playerId}),e}))}removeAllListeners(){[this.onMatch].forEach((e=>e.clear()))}checkInit(){if(0==this.state)throw new GOBEError(90001);return!0}checkCreateOrJoin(){if(this._room&&1!=this.state)throw new GOBEError(90003);return!0}checkGroupCreateOrJoin(){if(this._group&&1==this.state)throw new GOBEError(80004);return!0}checkLeaveOrdismiss(){if(!this._room&&1==this.state&&!this.lastRoomId)throw new GOBEError(90002);return!0}checkLastRoomId(){if(!this.lastRoomId)throw new GOBEError(90002);return!0}checkGroupLeaveOrdismiss(){if(!this._group&&1==this.state)throw new GOBEError(80001);return!0}checkCreateRoomConfig(e){var t;if(((null===(t=e.roomName)||void 0===t?void 0:t.length)||0)>64)throw new GOBEError(10001);return!0}checkCreateGroupConfig(e){var t;if(((null===(t=e.groupName)||void 0===t?void 0:t.length)||0)>64)throw new GOBEError(80002);return!0}checkJoinRoomConfig(e){const t={roomId:"",roomCode:""};switch(e.length){case 6:t.roomCode=e;break;case 18:t.roomId=e;break;default:throw new GOBEError(90007)}return t}checkMatching(){if(this._isMatching)throw new GOBEError(90008);return!0}}class Random{constructor(e){if(this.mask=123459876,this.m=2147483647,this.a=16807,"number"!=typeof e||e!=e||e%1!=0||e<1)throw new TypeError("Seed must be a positive integer.");this.seed=e%1e8}getNumber(){this.seed=this.seed^this.mask,this.seed=this.a*this.seed%this.m;const e=this.seed/this.m;return this.seed=this.seed^this.mask,e}}exports.Base=Base,exports.Client=Client,exports.EventEmitter=EventEmitter,exports.GOBEError=GOBEError,exports.Group=Group,exports.Player=Player,exports.RandomUtils=Random,exports.Room=Room,Object.defineProperty(exports,"__esModule",{value:!0})}));
